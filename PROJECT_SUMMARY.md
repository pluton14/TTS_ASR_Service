# Project Summary

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [x] **3 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö**: tts-service, asr-service, gateway
- [x] **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è bridge-—Å–µ—Ç—å**: speech_net
- [x] **–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ volumes**: models_tts, models_asr, logs
- [x] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env**: env.example —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### TTS Service (tts-service)
- [x] **WebSocket API**: `ws://tts:8082/ws/tts` —Å JSON –≤—Ö–æ–¥–æ–º `{"text": "..."}`
- [x] **HTTP API**: `POST /api/tts` —Å chunked –æ—Ç–≤–µ—Ç–æ–º
- [x] **–°—Ç—Ä–∏–º–∏–Ω–≥ –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏**: PCM —Ñ—Ä–µ–π–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [x] **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞**: 1024 –±–∞–π—Ç–∞ —Å –¥–æ–ø—É—Å—Ç–∏–º—ã–º drift ‚â§ 10%
- [x] **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: `{"type":"end"}` –¥–ª—è WS, –æ–∫–æ–Ω—á–∞–Ω–∏–µ HTTP –ø–æ—Ç–æ–∫–∞
- [x] **Health check**: `/health` endpoint

### ASR Service (asr-service)
- [x] **HTTP API**: `POST /api/stt/bytes` —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ sr, ch, lang
- [x] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ PCM**: application/octet-stream –±–µ–∑ WAV –∑–∞–≥–æ–ª–æ–≤–∫–∞
- [x] **JSON –æ—Ç–≤–µ—Ç**: `{"text": "..."}` —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ segments
- [x] **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏**: ‚â§ 15 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ
- [x] **Health check**: `/health` endpoint

### Gateway Service (gateway)
- [x] **WebSocket proxy**: `ws://gateway:8000/ws/tts` –¥–ª—è TTS
- [x] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤**: `{"segments": [{"text":"..."}, ...]}`
- [x] **Echo bytes**: `POST /api/echo-bytes` (ASR ‚Üí TTS pipeline)
- [x] **–†–µ—Å—Ç–∏–º–∏–Ω–≥ –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏**: PCM —Ñ—Ä–µ–π–º—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- [x] **Health check**: `/health` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (client/)
- [x] **stream_tts.py**: WebSocket –∫–ª–∏–µ–Ω—Ç —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ out.wav
- [x] **echo_bytes.py**: HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è echo-bytes —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ out_echo.wav
- [x] **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏**: –ø–µ—á–∞—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ—Ä–µ–π–º–æ–≤
- [x] **–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç**: –≤—ã–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞/—Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ—Ç ASR

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- [x] **Python + FastAPI**: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [x] **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: JSON —Ñ–æ—Ä–º–∞—Ç, –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –æ—à–∏–±–æ–∫
- [x] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ env**: –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ—Ä—Ç–æ–≤/–ø—É—Ç–µ–π
- [x] **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: —Ç–∞–π–º–∞—É—Ç—ã, 4xx/5xx –∫–æ–¥—ã, –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- [x] **Unit —Ç–µ—Å—Ç—ã**: 2-3 –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∫–µ–π—Å–∞ –Ω–∞ —Å–µ—Ä–≤–∏—Å
- [x] **–ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –í—ã–±—Ä–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
- **TTS**: gTTS + Google Text-to-Speech (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ—á–∏, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑–∞–≤–∏—Å–∏–º—ã–π)
- **ASR**: OpenAI Whisper base.en (–≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, CPU —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- **–°—Ç—Ä–∏–º–∏–Ω–≥ TTS**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏
- **–ê—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Å —á–µ—Ç–∫–∏–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
- **Docker-first –ø–æ–¥—Ö–æ–¥**: –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å health checks

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ tts-service/          # TTS –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ tts_engine.py    # TTS –¥–≤–∏–∂–æ–∫ (gTTS)
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.py        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ test_main.py     # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ asr-service/         # ASR –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ asr_engine.py    # ASR –¥–≤–∏–∂–æ–∫ (Whisper)
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.py        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ test_main.py     # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ gateway/             # Gateway —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ services.py      # –ö–ª–∏–µ–Ω—Ç—ã –¥–ª—è TTS/ASR
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.py        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ test_main.py     # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ client/              # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ stream_tts.py    # WebSocket TTS –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ echo_bytes.py    # Echo bytes –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ docker-compose.yml   # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ env.example         # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ README.md           # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_START.md      # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ DECISIONS.md        # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è
‚îî‚îÄ‚îÄ PROJECT_SUMMARY.md  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
git clone <repository-url>
cd TEST_Volgarev
cp env.example .env

# 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pip install -r client/requirements.txt
python client/stream_tts.py
python client/echo_bytes.py

# 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pip install -r requirements-test.txt
pytest tts-service/test_main.py asr-service/test_main.py gateway/test_main.py -v
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **TTS**: ~1-2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
- **ASR**: ~3-5 —Å–µ–∫—É–Ω–¥ –¥–ª—è 10-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ (CPU)
- **–°—Ç—Ä–∏–º–∏–Ω–≥**: –ó–∞–¥–µ—Ä–∂–∫–∞ < 100ms –º–µ–∂–¥—É —Ñ—Ä–µ–π–º–∞–º–∏
- **–ü–∞–º—è—Ç—å**: ~2-3GB –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```env
# –ü–æ—Ä—Ç—ã –∏ —Ö–æ—Å—Ç—ã
GATEWAY_PORT=8000
TTS_PORT=8082
ASR_PORT=8081

# –ú–æ–¥–µ–ª–∏
TTS_MODEL_NAME=gtts
ASR_MODEL_NAME=base.en

# –ê—É–¥–∏–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
TTS_SAMPLE_RATE=22050
ASR_SAMPLE_RATE=16000
TTS_CHUNK_SIZE=1024

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
LOG_FORMAT=json
```

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω
- ‚úÖ TTS —Å–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–π –≤—ã–¥–∞—á–µ–π –∞—É–¥–∏–æ
- ‚úÖ STT –ø–æ –≥–æ—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å Open-Source –º–æ–¥–µ–ª—è–º–∏
- ‚úÖ Docker –∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
- ‚úÖ CPU-only —Ä–µ—à–µ–Ω–∏–µ (GPU –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- ‚úÖ –¢–æ–ª—å–∫–æ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å (–æ–±—É—á–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- ‚úÖ –ß–∏—Å—Ç–æ—Ç–∞ –∏ –∫—Ä–∞—Å–æ—Ç–∞ –∫–æ–¥–∞
